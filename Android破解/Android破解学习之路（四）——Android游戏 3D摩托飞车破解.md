原文链接：http://www.cnblogs.com/kexing/archive/2017/12/29/8127953.html

经过前面三期的破解，想必大家已经非常熟悉破解的流程，这一篇也算是练手项目，我们继续来练习吧

apk下载地址:链接: https://pan.baidu.com/s/1sl3b3R3 密码: 6666

破解步骤：
-----

### 1.试玩，找到关键字

如下图，可以看到弹出了Toast对话框，支付失败！这几字就是我们要找的关键字了

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171227214752691-1165207037.jpg)

### 2.反编译，查找关键字

由下图，可以看到三个结果，我们一个个打开，使用工具，查看java源码，可以确定最后一个才是我们修改的smail文件

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171227220525550-1316400384.png)

 ![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171227220655050-973125533.png)

 可以看到里面有支付取消，支付成功的相关代码

### 3.破解开始

还记得上一节说的switch方法吗，我们只需要将原本要跳转到支付失败的那个改为跳转到支付成功的即可

查看smail文件，可以知道pswitch\_1代表着支付失败，pswitch\_0即相对地代表着支付成功

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171227221037128-341334995.png)

将pswitch\_1修改为pswitch\_0即完成破解，或者是删除pswitch_1

 ![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171227221141144-1136200444.png)

再或者，使用goto语句，直接跳到pswitch_0中

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171228153017663-1738033101.png)

之后，删除不必要的权限，拨打电话和发送短信权限都删除

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171228153132819-629788302.png)

或者还有其他的权限，你可以一一对照来进行删除，不知道权限是什么意思，可以在Androidkiller中的工程信息查看，鼠标悬浮在相应的权限，就会有权限的说明，红色则是危险权限，一般删除红色的权限就可以了，你觉得其他权限不需要，也可以继续删除。

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171228153311084-1954969725.png)

###  4.测试

这里不得吐槽一下，之前用的Android平板电脑来测试，测了N次都不成功，我还以为我思路错了，可能是平板电脑没有sim卡的缘故，之后，使用手机测试，则是破解成功了

 ![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171228152619975-1150549151.jpg)

![](http://images2017.cnblogs.com/blog/1210268/201712/1210268-20171228152707319-44399046.jpg)